{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useContext, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Button, HelperText, Text, TextInput } from 'react-native-paper';\nimport { Controller, useForm } from 'react-hook-form';\nimport { useMutation } from \"@tanstack/react-query\";\nimport * as SecureStore from 'expo-secure-store';\nimport { AuthContext } from \"../assets/contexts/AuthContext\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { loginStyles as styles } from \"../assets/styles/styles\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Login = function Login(_ref) {\n  var navigation = _ref.navigation;\n  var insets = useSafeAreaInsets();\n  var _useForm = useForm({\n      defaultValues: {\n        username: '',\n        password: ''\n      }\n    }),\n    control = _useForm.control,\n    handleSubmit = _useForm.handleSubmit,\n    errors = _useForm.formState.errors;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    showPassword = _useState2[0],\n    setShowPassword = _useState2[1];\n  var Auth = useContext(AuthContext);\n  var _useMutation = useMutation(Auth.login, {\n      onSuccess: function () {\n        var _onSuccess = _asyncToGenerator(function* (data) {\n          yield SecureStore.setItemAsync('token', data.token).then(navigation.navigate('Home'));\n        });\n        function onSuccess(_x) {\n          return _onSuccess.apply(this, arguments);\n        }\n        return onSuccess;\n      }(),\n      onError: function onError(error) {\n        console.log(error);\n      }\n    }),\n    mutate = _useMutation.mutate;\n  var onSubmit = function () {\n    var _ref2 = _asyncToGenerator(function* (data) {\n      console.log(data);\n      mutate(data);\n    });\n    return function onSubmit(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  return _jsx(View, {\n    style: {\n      flex: 1,\n      paddingTop: insets.top,\n      paddingBottom: insets.bottom,\n      paddingLeft: insets.left,\n      paddingRight: insets.right\n    },\n    children: _jsxs(View, {\n      style: styles.container,\n      children: [_jsx(Image, {\n        source: require(\"../assets/images/logo.png\"),\n        style: styles.logo\n      }), _jsx(Text, {\n        style: styles.heading,\n        children: Auth.token\n      }), _jsx(Controller, {\n        control: control,\n        render: function render(_ref3) {\n          var _ref3$field = _ref3.field,\n            onChange = _ref3$field.onChange,\n            onBlur = _ref3$field.onBlur,\n            value = _ref3$field.value;\n          return _jsx(TextInput, {\n            mode: \"outlined\",\n            label: \"Username\",\n            placeholder: \"Username\",\n            style: styles.input,\n            error: errors.username !== undefined,\n            onBlur: onBlur,\n            onChangeText: onChange,\n            value: value\n          });\n        },\n        name: \"username\",\n        rules: {\n          required: 'Username is required'\n        }\n      }), errors.username && _jsx(HelperText, {\n        type: \"error\",\n        style: styles.helperText,\n        children: errors.username.message\n      }), _jsx(Controller, {\n        control: control,\n        render: function render(_ref4) {\n          var _ref4$field = _ref4.field,\n            onChange = _ref4$field.onChange,\n            onBlur = _ref4$field.onBlur,\n            value = _ref4$field.value;\n          return _jsx(TextInput, {\n            mode: \"outlined\",\n            label: \"Password\",\n            placeholder: \"Password\",\n            secureTextEntry: !showPassword,\n            style: styles.input,\n            error: errors.password !== undefined,\n            onBlur: onBlur,\n            onChangeText: onChange,\n            value: value,\n            right: _jsx(TextInput.Icon, {\n              onPress: function onPress() {\n                return setShowPassword(!showPassword);\n              },\n              icon: showPassword ? 'eye-off' : 'eye'\n            })\n          });\n        },\n        name: \"password\",\n        rules: {\n          required: 'Password is required'\n        }\n      }), errors.password && _jsx(HelperText, {\n        type: \"error\",\n        style: styles.helperText,\n        children: errors.password.message\n      }), _jsx(Button, {\n        mode: \"contained\",\n        style: styles.button,\n        onPress: handleSubmit(onSubmit),\n        children: \"Login\"\n      }), _jsx(Button, {\n        mode: \"outlined\",\n        style: styles.button,\n        onPress: function onPress() {\n          return navigation.navigate('Register');\n        },\n        children: \"Don't have an account? Register here\"\n      })]\n    })\n  });\n};\nexport default Login;","map":{"version":3,"names":["React","useContext","useState","View","Image","Button","HelperText","Text","TextInput","Controller","useForm","useMutation","SecureStore","AuthContext","useSafeAreaInsets","loginStyles","styles","jsx","_jsx","jsxs","_jsxs","Login","_ref","navigation","insets","_useForm","defaultValues","username","password","control","handleSubmit","errors","formState","_useState","_useState2","_slicedToArray","showPassword","setShowPassword","Auth","_useMutation","login","onSuccess","_onSuccess","_asyncToGenerator","data","setItemAsync","token","then","navigate","_x","apply","arguments","onError","error","console","log","mutate","onSubmit","_ref2","_x2","style","flex","paddingTop","top","paddingBottom","bottom","paddingLeft","left","paddingRight","right","children","container","source","require","logo","heading","render","_ref3","_ref3$field","field","onChange","onBlur","value","mode","label","placeholder","input","undefined","onChangeText","name","rules","required","type","helperText","message","_ref4","_ref4$field","secureTextEntry","Icon","onPress","icon","button"],"sources":["C:/Users/syho0/OneDrive/Desktop/Code/capstone_project_app/screens/Login.tsx"],"sourcesContent":["import React, {useContext, useState} from 'react';\r\nimport {StyleSheet, View, Image} from 'react-native';\r\nimport {Button, HelperText, Text, TextInput} from 'react-native-paper';\r\nimport {Controller, useForm} from 'react-hook-form';\r\nimport {useMutation} from \"@tanstack/react-query\";\r\nimport * as SecureStore from 'expo-secure-store';\r\nimport {AuthContext} from \"../assets/contexts/AuthContext\";\r\nimport {useSafeAreaInsets} from \"react-native-safe-area-context\";\r\nimport {loginStyles as styles} from \"../assets/styles/styles\";\r\n\r\nconst Login = ({navigation}: any) => {\r\n    const insets = useSafeAreaInsets();\r\n\r\n    const {control, handleSubmit, formState: {errors}} = useForm({\r\n        defaultValues: {\r\n            username: '',\r\n            password: '',\r\n        },\r\n    });\r\n\r\n    const [showPassword, setShowPassword] = useState(false);\r\n\r\n    const Auth = useContext(AuthContext);\r\n\r\n    const {mutate} = useMutation<any, Error, any>(Auth.login, {\r\n        onSuccess: async (data: any) => {\r\n            await SecureStore.setItemAsync('token', data.token).then(navigation.navigate('Home'));\r\n        },\r\n        onError: (error: Error) => {\r\n            console.log(error)\r\n        }\r\n    })\r\n\r\n    const onSubmit = async (data: any) => {\r\n        console.log(data)\r\n        mutate(data);\r\n    }\r\n\r\n    return (\r\n        <View style={{\r\n            flex: 1,\r\n            paddingTop: insets.top,\r\n            paddingBottom: insets.bottom,\r\n            paddingLeft: insets.left,\r\n            paddingRight: insets.right,\r\n        }}>\r\n            <View style={styles.container}>\r\n                <Image\r\n                    source={require('../assets/images/logo.png')}\r\n                    style={styles.logo}\r\n                />\r\n                <Text style={styles.heading}>{Auth.token}</Text>\r\n                <Controller\r\n                    control={control}\r\n                    render={({field: {onChange, onBlur, value}}) => (\r\n                        <TextInput\r\n                            mode='outlined'\r\n                            label='Username'\r\n                            placeholder='Username'\r\n                            style={styles.input}\r\n                            error={errors.username !== undefined}\r\n                            onBlur={onBlur}\r\n                            onChangeText={onChange}\r\n                            value={value}\r\n                        />\r\n                    )}\r\n                    name='username'\r\n                    rules={{required: 'Username is required'}}\r\n                />\r\n                {errors.username && (\r\n                    <HelperText type='error' style={styles.helperText}>\r\n                        {errors.username.message}\r\n                    </HelperText>\r\n                )}\r\n                <Controller\r\n                    control={control}\r\n                    render={({field: {onChange, onBlur, value}}) => (\r\n                        <TextInput\r\n                            mode='outlined'\r\n                            label='Password'\r\n                            placeholder='Password'\r\n                            secureTextEntry={!showPassword}\r\n                            style={styles.input}\r\n                            error={errors.password !== undefined}\r\n                            onBlur={onBlur}\r\n                            onChangeText={onChange}\r\n                            value={value}\r\n                            right={\r\n                                <TextInput.Icon\r\n                                    onPress={() => setShowPassword(!showPassword)}\r\n                                    icon={showPassword ? 'eye-off' : 'eye'}\r\n                                />\r\n                            }\r\n                        />\r\n                    )}\r\n                    name='password'\r\n                    rules={{required: 'Password is required'}}\r\n                />\r\n                {errors.password && (\r\n                    <HelperText type='error' style={styles.helperText}>\r\n                        {errors.password.message}\r\n                    </HelperText>\r\n                )}\r\n                <Button mode='contained' style={styles.button} onPress={handleSubmit(onSubmit)}>\r\n                    Login\r\n                </Button>\r\n                <Button\r\n                    mode='outlined'\r\n                    style={styles.button}\r\n                    onPress={() => navigation.navigate('Register')}\r\n                >\r\n                Don't have an account? Register here\r\n                </Button>\r\n            </View>\r\n        </View>\r\n    );\r\n};\r\n\r\nexport default Login;"],"mappings":";;AAAA,OAAOA,KAAK,IAAGC,UAAU,EAAEC,QAAQ,QAAO,OAAO;AAAC,OAAAC,IAAA;AAAA,OAAAC,KAAA;AAElD,SAAQC,MAAM,EAAEC,UAAU,EAAEC,IAAI,EAAEC,SAAS,QAAO,oBAAoB;AACtE,SAAQC,UAAU,EAAEC,OAAO,QAAO,iBAAiB;AACnD,SAAQC,WAAW,QAAO,uBAAuB;AACjD,OAAO,KAAKC,WAAW,MAAM,mBAAmB;AAChD,SAAQC,WAAW;AACnB,SAAQC,iBAAiB,QAAO,gCAAgC;AAChE,SAAQC,WAAW,IAAIC,MAAM;AAAiC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAE9D,IAAMC,KAAK,GAAG,SAARA,KAAKA,CAAAC,IAAA,EAA0B;EAAA,IAArBC,UAAU,GAAAD,IAAA,CAAVC,UAAU;EACtB,IAAMC,MAAM,GAAGV,iBAAiB,CAAC,CAAC;EAElC,IAAAW,QAAA,GAAqDf,OAAO,CAAC;MACzDgB,aAAa,EAAE;QACXC,QAAQ,EAAE,EAAE;QACZC,QAAQ,EAAE;MACd;IACJ,CAAC,CAAC;IALKC,OAAO,GAAAJ,QAAA,CAAPI,OAAO;IAAEC,YAAY,GAAAL,QAAA,CAAZK,YAAY;IAAcC,MAAM,GAAAN,QAAA,CAAlBO,SAAS,CAAGD,MAAM;EAOhD,IAAAE,SAAA,GAAwC/B,QAAQ,CAAC,KAAK,CAAC;IAAAgC,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAhDG,YAAY,GAAAF,UAAA;IAAEG,eAAe,GAAAH,UAAA;EAEpC,IAAMI,IAAI,GAAGrC,UAAU,CAACY,WAAW,CAAC;EAEpC,IAAA0B,YAAA,GAAiB5B,WAAW,CAAkB2B,IAAI,CAACE,KAAK,EAAE;MACtDC,SAAS;QAAA,IAAAC,UAAA,GAAAC,iBAAA,CAAE,WAAOC,IAAS,EAAK;UAC5B,MAAMhC,WAAW,CAACiC,YAAY,CAAC,OAAO,EAAED,IAAI,CAACE,KAAK,CAAC,CAACC,IAAI,CAACxB,UAAU,CAACyB,QAAQ,CAAC,MAAM,CAAC,CAAC;QACzF,CAAC;QAAA,SAAAP,UAAAQ,EAAA;UAAA,OAAAP,UAAA,CAAAQ,KAAA,OAAAC,SAAA;QAAA;QAAA,OAAAV,SAAA;MAAA;MACDW,OAAO,EAAE,SAAAA,QAACC,KAAY,EAAK;QACvBC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACtB;IACJ,CAAC,CAAC;IAPKG,MAAM,GAAAjB,YAAA,CAANiB,MAAM;EASb,IAAMC,QAAQ;IAAA,IAAAC,KAAA,GAAAf,iBAAA,CAAG,WAAOC,IAAS,EAAK;MAClCU,OAAO,CAACC,GAAG,CAACX,IAAI,CAAC;MACjBY,MAAM,CAACZ,IAAI,CAAC;IAChB,CAAC;IAAA,gBAHKa,QAAQA,CAAAE,GAAA;MAAA,OAAAD,KAAA,CAAAR,KAAA,OAAAC,SAAA;IAAA;EAAA,GAGb;EAED,OACIjC,IAAA,CAACf,IAAI;IAACyD,KAAK,EAAE;MACTC,IAAI,EAAE,CAAC;MACPC,UAAU,EAAEtC,MAAM,CAACuC,GAAG;MACtBC,aAAa,EAAExC,MAAM,CAACyC,MAAM;MAC5BC,WAAW,EAAE1C,MAAM,CAAC2C,IAAI;MACxBC,YAAY,EAAE5C,MAAM,CAAC6C;IACzB,CAAE;IAAAC,QAAA,EACElD,KAAA,CAACjB,IAAI;MAACyD,KAAK,EAAE5C,MAAM,CAACuD,SAAU;MAAAD,QAAA,GAC1BpD,IAAA,CAACd,KAAK;QACFoE,MAAM,EAAEC,OAAO,4BAA4B,CAAE;QAC7Cb,KAAK,EAAE5C,MAAM,CAAC0D;MAAK,CACtB,CAAC,EACFxD,IAAA,CAACX,IAAI;QAACqD,KAAK,EAAE5C,MAAM,CAAC2D,OAAQ;QAAAL,QAAA,EAAEhC,IAAI,CAACQ;MAAK,CAAO,CAAC,EAChD5B,IAAA,CAACT,UAAU;QACPoB,OAAO,EAAEA,OAAQ;QACjB+C,MAAM,EAAE,SAAAA,OAAAC,KAAA;UAAA,IAAAC,WAAA,GAAAD,KAAA,CAAEE,KAAK;YAAGC,QAAQ,GAAAF,WAAA,CAARE,QAAQ;YAAEC,MAAM,GAAAH,WAAA,CAANG,MAAM;YAAEC,KAAK,GAAAJ,WAAA,CAALI,KAAK;UAAA,OACrChE,IAAA,CAACV,SAAS;YACN2E,IAAI,EAAC,UAAU;YACfC,KAAK,EAAC,UAAU;YAChBC,WAAW,EAAC,UAAU;YACtBzB,KAAK,EAAE5C,MAAM,CAACsE,KAAM;YACpBjC,KAAK,EAAEtB,MAAM,CAACJ,QAAQ,KAAK4D,SAAU;YACrCN,MAAM,EAAEA,MAAO;YACfO,YAAY,EAAER,QAAS;YACvBE,KAAK,EAAEA;UAAM,CAChB,CAAC;QAAA,CACJ;QACFO,IAAI,EAAC,UAAU;QACfC,KAAK,EAAE;UAACC,QAAQ,EAAE;QAAsB;MAAE,CAC7C,CAAC,EACD5D,MAAM,CAACJ,QAAQ,IACZT,IAAA,CAACZ,UAAU;QAACsF,IAAI,EAAC,OAAO;QAAChC,KAAK,EAAE5C,MAAM,CAAC6E,UAAW;QAAAvB,QAAA,EAC7CvC,MAAM,CAACJ,QAAQ,CAACmE;MAAO,CAChB,CACf,EACD5E,IAAA,CAACT,UAAU;QACPoB,OAAO,EAAEA,OAAQ;QACjB+C,MAAM,EAAE,SAAAA,OAAAmB,KAAA;UAAA,IAAAC,WAAA,GAAAD,KAAA,CAAEhB,KAAK;YAAGC,QAAQ,GAAAgB,WAAA,CAARhB,QAAQ;YAAEC,MAAM,GAAAe,WAAA,CAANf,MAAM;YAAEC,KAAK,GAAAc,WAAA,CAALd,KAAK;UAAA,OACrChE,IAAA,CAACV,SAAS;YACN2E,IAAI,EAAC,UAAU;YACfC,KAAK,EAAC,UAAU;YAChBC,WAAW,EAAC,UAAU;YACtBY,eAAe,EAAE,CAAC7D,YAAa;YAC/BwB,KAAK,EAAE5C,MAAM,CAACsE,KAAM;YACpBjC,KAAK,EAAEtB,MAAM,CAACH,QAAQ,KAAK2D,SAAU;YACrCN,MAAM,EAAEA,MAAO;YACfO,YAAY,EAAER,QAAS;YACvBE,KAAK,EAAEA,KAAM;YACbb,KAAK,EACDnD,IAAA,CAACV,SAAS,CAAC0F,IAAI;cACXC,OAAO,EAAE,SAAAA,QAAA;gBAAA,OAAM9D,eAAe,CAAC,CAACD,YAAY,CAAC;cAAA,CAAC;cAC9CgE,IAAI,EAAEhE,YAAY,GAAG,SAAS,GAAG;YAAM,CAC1C;UACJ,CACJ,CAAC;QAAA,CACJ;QACFqD,IAAI,EAAC,UAAU;QACfC,KAAK,EAAE;UAACC,QAAQ,EAAE;QAAsB;MAAE,CAC7C,CAAC,EACD5D,MAAM,CAACH,QAAQ,IACZV,IAAA,CAACZ,UAAU;QAACsF,IAAI,EAAC,OAAO;QAAChC,KAAK,EAAE5C,MAAM,CAAC6E,UAAW;QAAAvB,QAAA,EAC7CvC,MAAM,CAACH,QAAQ,CAACkE;MAAO,CAChB,CACf,EACD5E,IAAA,CAACb,MAAM;QAAC8E,IAAI,EAAC,WAAW;QAACvB,KAAK,EAAE5C,MAAM,CAACqF,MAAO;QAACF,OAAO,EAAErE,YAAY,CAAC2B,QAAQ,CAAE;QAAAa,QAAA,EAAC;MAEhF,CAAQ,CAAC,EACTpD,IAAA,CAACb,MAAM;QACH8E,IAAI,EAAC,UAAU;QACfvB,KAAK,EAAE5C,MAAM,CAACqF,MAAO;QACrBF,OAAO,EAAE,SAAAA,QAAA;UAAA,OAAM5E,UAAU,CAACyB,QAAQ,CAAC,UAAU,CAAC;QAAA,CAAC;QAAAsB,QAAA,EAClD;MAED,CAAQ,CAAC;IAAA,CACP;EAAC,CACL,CAAC;AAEf,CAAC;AAED,eAAejD,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}